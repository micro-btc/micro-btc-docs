# Multi-Key Addresses

Multi-key adresses, or multisig addresses, are addresses that specify multiple keys that can spend from the address and require one or more keys to authorize a transfer.

## Library Imports

```typescript
import * as btc from 'micro-btc-signer'
import { hex } from '@scure/base' 
```

## Keys for Testing

```typescript
const keySets = [
  { pub: hex.decode('030000000000000000000000000000000000000000000000000000000000000001'), schnorrPub: hex.decode('0101010101010101010101010101010101010101010101010101010101010101') },
  { pub: hex.decode('030000000000000000000000000000000000000000000000000000000000000002'), schnorrPub: hex.decode('0202020202020202020202020202020202020202020202020202020202020202') },
  { pub: hex.decode('030000000000000000000000000000000000000000000000000000000000000003'), schnorrPub: hex.decode('1212121212121212121212121212121212121212121212121212121212121212') }
]
```

## SegWit Script Hash: 2 of \{A, B, C\}

### Code

```typescript
const scriptInfo = btc.p2ms(2, keySets.map(keySet => keySet.pub))
const scriptHashInfo = btc.p2wsh(scriptInfo)
const script = hex.encode(scriptInfo.script)
const scriptHash = hex.encode(scriptHashInfo.script)
const address = scriptHashInfo.address
```

### Console

```typescript
> console.log(script)
5221030000000000000000000000000000000000000000000000000000000000000001210300000000000000000000000000000000000000000000000000000000000000022103000000000000000000000000000000000000000000000000000000000000000353ae
> console.log(scriptHash)
002074ee2b4ceec10839a489c07d4a538384394681e3dcd88f3ee87a85199908aa5e
> console.log(address)
bc1qwnhzkn8wcyyrnfyfcp7555urssu5dq0rmnvg70hg02z3nxgg4f0qljmr2h
```

## Classic Script Hash: 2 of \{A, B, C\}

### Code

```typescript
const scriptInfo = btc.p2ms(2, keySets.map(keySet => keySet.pub))
const scriptHashInfo = btc.p2sh(scriptInfo)
const script = hex.encode(scriptInfo.script)
const scriptHash = hex.encode(scriptHashInfo.script)
const address = scriptHashInfo.address
```

### Console

```typescript
> console.log(script)
5221030000000000000000000000000000000000000000000000000000000000000001210300000000000000000000000000000000000000000000000000000000000000022103000000000000000000000000000000000000000000000000000000000000000353ae
> console.log(scriptHash)
a9149d91c6de4eacde72a7cc86bff98d1915b3c7818f87
> console.log(address)
3G4AeQtzCLoDAyv2eb3UVTG5atfkyHtuRn
```

## Taproot w/ Script Tree: (A&B) or (A&C) or (B&C)

### Code

```typescript
const leafScriptInfo = btc.p2tr_ns(2, keySets.map(k => k.schnorrPub))
const scriptInfo = btc.p2tr(undefined, leafScriptInfo)

const leafScripts = leafScriptInfo.map(s => hex.encode(s.script))
const script = hex.encode(scriptInfo.script)
const address = scriptInfo.address
```

### Console

```typescript
> leafScripts.map(s => console.log(s))
200101010101010101010101010101010101010101010101010101010101010101ad200202020202020202020202020202020202020202020202020202020202020202ac
200101010101010101010101010101010101010101010101010101010101010101ad201212121212121212121212121212121212121212121212121212121212121212ac
200202020202020202020202020202020202020202020202020202020202020202ad201212121212121212121212121212121212121212121212121212121212121212ac
> console.log(script)
5120cb138dcec0001e5ed66f4c0f8f6ddfc6875ca401620800c99947ffd621ca8d12
> console.log(address)
bc1pevfcmnkqqq09a4n0fs8c7mwlc6r4efqpvgyqpjvegllavgw235fq3kz7a0
```
